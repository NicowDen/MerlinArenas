{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HitCanvas = exports.SceneCanvas = exports.Canvas = void 0;\nconst Util_1 = require(\"./Util\");\nconst Context_1 = require(\"./Context\");\nconst Global_1 = require(\"./Global\");\nconst Factory_1 = require(\"./Factory\");\nconst Validators_1 = require(\"./Validators\");\nvar _pixelRatio;\nfunction getDevicePixelRatio() {\n  if (_pixelRatio) {\n    return _pixelRatio;\n  }\n  var canvas = Util_1.Util.createCanvasElement();\n  var context = canvas.getContext('2d');\n  _pixelRatio = function () {\n    var devicePixelRatio = Global_1.Konva._global.devicePixelRatio || 1,\n      backingStoreRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio || context.backingStorePixelRatio || 1;\n    return devicePixelRatio / backingStoreRatio;\n  }();\n  Util_1.Util.releaseCanvas(canvas);\n  return _pixelRatio;\n}\nclass Canvas {\n  constructor(config) {\n    this.pixelRatio = 1;\n    this.width = 0;\n    this.height = 0;\n    this.isCache = false;\n    var conf = config || {};\n    var pixelRatio = conf.pixelRatio || Global_1.Konva.pixelRatio || getDevicePixelRatio();\n    this.pixelRatio = pixelRatio;\n    this._canvas = Util_1.Util.createCanvasElement();\n    this._canvas.style.padding = '0';\n    this._canvas.style.margin = '0';\n    this._canvas.style.border = '0';\n    this._canvas.style.background = 'transparent';\n    this._canvas.style.position = 'absolute';\n    this._canvas.style.top = '0';\n    this._canvas.style.left = '0';\n  }\n  getContext() {\n    return this.context;\n  }\n  getPixelRatio() {\n    return this.pixelRatio;\n  }\n  setPixelRatio(pixelRatio) {\n    var previousRatio = this.pixelRatio;\n    this.pixelRatio = pixelRatio;\n    this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n  }\n  setWidth(width) {\n    this.width = this._canvas.width = width * this.pixelRatio;\n    this._canvas.style.width = width + 'px';\n    var pixelRatio = this.pixelRatio,\n      _context = this.getContext()._context;\n    _context.scale(pixelRatio, pixelRatio);\n  }\n  setHeight(height) {\n    this.height = this._canvas.height = height * this.pixelRatio;\n    this._canvas.style.height = height + 'px';\n    var pixelRatio = this.pixelRatio,\n      _context = this.getContext()._context;\n    _context.scale(pixelRatio, pixelRatio);\n  }\n  getWidth() {\n    return this.width;\n  }\n  getHeight() {\n    return this.height;\n  }\n  setSize(width, height) {\n    this.setWidth(width || 0);\n    this.setHeight(height || 0);\n  }\n  toDataURL(mimeType, quality) {\n    try {\n      return this._canvas.toDataURL(mimeType, quality);\n    } catch (e) {\n      try {\n        return this._canvas.toDataURL();\n      } catch (err) {\n        Util_1.Util.error('Unable to get data URL. ' + err.message + ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n        return '';\n      }\n    }\n  }\n}\nexports.Canvas = Canvas;\nFactory_1.Factory.addGetterSetter(Canvas, 'pixelRatio', undefined, (0, Validators_1.getNumberValidator)());\nclass SceneCanvas extends Canvas {\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      width: 0,\n      height: 0,\n      willReadFrequently: false\n    };\n    super(config);\n    this.context = new Context_1.SceneContext(this, {\n      willReadFrequently: config.willReadFrequently\n    });\n    this.setSize(config.width, config.height);\n  }\n}\nexports.SceneCanvas = SceneCanvas;\nclass HitCanvas extends Canvas {\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      width: 0,\n      height: 0\n    };\n    super(config);\n    this.hitCanvas = true;\n    this.context = new Context_1.HitContext(this);\n    this.setSize(config.width, config.height);\n  }\n}\nexports.HitCanvas = HitCanvas;","map":{"version":3,"names":["Object","defineProperty","exports","value","HitCanvas","SceneCanvas","Canvas","Util_1","require","Context_1","Global_1","Factory_1","Validators_1","_pixelRatio","getDevicePixelRatio","canvas","Util","createCanvasElement","context","getContext","devicePixelRatio","Konva","_global","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","releaseCanvas","constructor","config","pixelRatio","width","height","isCache","conf","_canvas","style","padding","margin","border","background","position","top","left","getPixelRatio","setPixelRatio","previousRatio","setSize","getWidth","getHeight","setWidth","_context","scale","setHeight","toDataURL","mimeType","quality","e","err","error","message","Factory","addGetterSetter","undefined","getNumberValidator","willReadFrequently","SceneContext","hitCanvas","HitContext"],"sources":["/Users/nicolasgrenier/Documents/Code/fighting_RPG/node_modules/konva/lib/Canvas.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HitCanvas = exports.SceneCanvas = exports.Canvas = void 0;\nconst Util_1 = require(\"./Util\");\nconst Context_1 = require(\"./Context\");\nconst Global_1 = require(\"./Global\");\nconst Factory_1 = require(\"./Factory\");\nconst Validators_1 = require(\"./Validators\");\nvar _pixelRatio;\nfunction getDevicePixelRatio() {\n    if (_pixelRatio) {\n        return _pixelRatio;\n    }\n    var canvas = Util_1.Util.createCanvasElement();\n    var context = canvas.getContext('2d');\n    _pixelRatio = (function () {\n        var devicePixelRatio = Global_1.Konva._global.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            context.backingStorePixelRatio ||\n            1;\n        return devicePixelRatio / backingStoreRatio;\n    })();\n    Util_1.Util.releaseCanvas(canvas);\n    return _pixelRatio;\n}\nclass Canvas {\n    constructor(config) {\n        this.pixelRatio = 1;\n        this.width = 0;\n        this.height = 0;\n        this.isCache = false;\n        var conf = config || {};\n        var pixelRatio = conf.pixelRatio || Global_1.Konva.pixelRatio || getDevicePixelRatio();\n        this.pixelRatio = pixelRatio;\n        this._canvas = Util_1.Util.createCanvasElement();\n        this._canvas.style.padding = '0';\n        this._canvas.style.margin = '0';\n        this._canvas.style.border = '0';\n        this._canvas.style.background = 'transparent';\n        this._canvas.style.position = 'absolute';\n        this._canvas.style.top = '0';\n        this._canvas.style.left = '0';\n    }\n    getContext() {\n        return this.context;\n    }\n    getPixelRatio() {\n        return this.pixelRatio;\n    }\n    setPixelRatio(pixelRatio) {\n        var previousRatio = this.pixelRatio;\n        this.pixelRatio = pixelRatio;\n        this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n    }\n    setWidth(width) {\n        this.width = this._canvas.width = width * this.pixelRatio;\n        this._canvas.style.width = width + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    setHeight(height) {\n        this.height = this._canvas.height = height * this.pixelRatio;\n        this._canvas.style.height = height + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    getWidth() {\n        return this.width;\n    }\n    getHeight() {\n        return this.height;\n    }\n    setSize(width, height) {\n        this.setWidth(width || 0);\n        this.setHeight(height || 0);\n    }\n    toDataURL(mimeType, quality) {\n        try {\n            return this._canvas.toDataURL(mimeType, quality);\n        }\n        catch (e) {\n            try {\n                return this._canvas.toDataURL();\n            }\n            catch (err) {\n                Util_1.Util.error('Unable to get data URL. ' +\n                    err.message +\n                    ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                return '';\n            }\n        }\n    }\n}\nexports.Canvas = Canvas;\nFactory_1.Factory.addGetterSetter(Canvas, 'pixelRatio', undefined, (0, Validators_1.getNumberValidator)());\nclass SceneCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0, willReadFrequently: false }) {\n        super(config);\n        this.context = new Context_1.SceneContext(this, {\n            willReadFrequently: config.willReadFrequently,\n        });\n        this.setSize(config.width, config.height);\n    }\n}\nexports.SceneCanvas = SceneCanvas;\nclass HitCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.hitCanvas = true;\n        this.context = new Context_1.HitContext(this);\n        this.setSize(config.width, config.height);\n    }\n}\nexports.HitCanvas = HitCanvas;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}